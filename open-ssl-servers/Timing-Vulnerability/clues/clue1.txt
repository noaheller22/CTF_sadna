"Here is a helper function you can use in order to analyz the servers behavior"


import time, socket, statistics

def measure_avg_rtt(ciphertext_b64: str, tries: int):
    """Send the same ciphertext several times and report avg RTT in ms."""
    rtts = []
    for _ in range(tries):
        sock = socket.create_connection((PROXY_HOST, PROXY_PORT))
        start = time.perf_counter()
        sock.sendall(ciphertext_b64.encode() + b"\n")
        while sock.recv(4096):
            pass
        end = time.perf_counter()
        sock.close()
        rtts.append((end - start) * 1000)
    avg_rtt = statistics.mean(rtts)
    print(f"[DEBUG] Average RTT over {tries} tries: {avg_rtt:.3f} ms")
    return avg_rtt\